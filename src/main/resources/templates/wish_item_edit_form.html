<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Rediger √∏nske</title>
    <link rel="icon"
          href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üéÉ</text></svg>">
    <link th:href="@{/css/main.css}" rel="stylesheet">
    <link th:href="@{/css/halloween.css}" rel="stylesheet">
</head>
<body>
<div th:replace="~{fragments/header :: header}">...</div>

<main>
    <div class="content_wrapper form-page">
        <div class="form-container">
            <div class="form-header">
                <h1>Rediger √∏nske</h1>
            </div>

            <form class="modern-form" method="post" th:action="@{/edit_wish_item}" th:object="${wishItem}">
                <input type="hidden" th:field="*{id}"/>
                <input type="hidden" th:field="*{wishListId}"/>

                <div class="form-group">
                    <label for="title">Titel:</label>
                    <input id="title" type="text" th:field="*{title}" placeholder="F.eks. Ny bog, leget√∏j, osv." required/>
                    <div class="error" th:if="${#fields.hasErrors('title')}" th:errors="*{title}"></div>
                </div>

                <div class="form-group">
                    <label for="favourite">Marker som favorit ‚≠ê:</label>
                    <input id="favourite" type="checkbox" th:field="*{favourite}"/>
                </div>

                <div class="form-group">
                    <label for="description">Beskrivelse (valgfri):</label>
                    <textarea id="description" th:field="*{description}" rows="5" cols="40" placeholder="Beskriv dit √∏nske i detaljer..."></textarea>
                    <div class="error" th:if="${#fields.hasErrors('description')}" th:errors="*{description}"></div>
                </div>

                <div class="form-group">
                    <label for="price">Pris (kr.) (valgfri):</label>
                    <input id="price" type="number" step="0.01" min="0" th:field="*{price}"/>
                    <div class="error" th:if="${#fields.hasErrors('price')}" th:errors="*{price}"></div>
                </div>

                <div class="form-group">
                    <label for="qty">Antal:</label>
                    <input id="qty" type="number" step="1" min="1" th:field="*{quantity}"/>
                    <div class="error" th:if="${#fields.hasErrors('quantity')}" th:errors="*{quantity}"></div>
                </div>

                <div class="form-group">
                    <label for="link">Link til product (valgfri):</label>
                    <input id="link" type="url" th:field="*{link}" placeholder="https://..."/>
                    <div class="error" th:if="${#fields.hasErrors('link')}" th:errors="*{link}"></div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="submit-button">Opdater</button>

                    <a th:href="@{/wish_list/{wishListId}(wishListId = ${wishItem.wishListId})}" class="button-secondary">Annuller</a>
                </div>
                <div class="error" th:if="${#fields.hasErrors()}">
                    Der er fejl i formularen. Ret venligst fejlene ovenfor.
                </div>

                <div class="error" th:if="${updateFailure}">
                    Noget gik galt. Pr√∏v igen.
                </div>
            </form>

            <form th:action="@{/delete_wish_item/{wishItemId}(wishItemId = ${wishItem.id})}" method="post">
                <div class="form-actions">
                    <button type="submit" class="button-danger"
                            onclick="return confirm('Er du sikker p√• at du vil slette dette √∏nske permanent? Denne handling kan ikke fortrydes!')">
                        Slet √∏nske
                    </button>
                </div>
            </form>
            <div class="error" th:if="${deleteFailure}">üö´ Noget gik galt. Pr√∏v igen.
            </div>
        </div>
    </div>
</main>
</body>
</html>